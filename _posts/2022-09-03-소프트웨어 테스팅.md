---
layout: post
title: 소프트웨어 테스팅
excerpt: 버 그 헌 터
date: 2022-09-03 18:01 +0000
last_modified_at: 2022-09-03 18:01:22 +0000
tags: [CS]
toc:  true
---

어떤 프로그램을 만들면 항상 그 프로그램이 정상적으로 동작하는지 확인하기 위해 테스트를 진행합니다. 매번 중구난방으로 테스트를 해왔는데, 테스트도 체계화된 이론이 있었습니다.<br><br>

## 소프트웨어 테스팅

소프트웨어 테스팅은 **소프트웨어의 결함이 존재함을 보이는 과정**입니다. 문제가 없는 것을 보이는 것이 아니라 문제가 있는 것을 밝히는 것입니다. 소프트웨어 생명주기의 프로세스 ``요구사항 분석-설계-구현-테스트-유지보수``의 4번째 단계이기도합니다.<br>
요구사항 설계와 다르게 동작하는 모든 것은 **결함**입니다. 이미 제작된 소프트웨어에 대해서 테스트 케이스를 만들고 테스팅하는 것은 매우 귀찮은 작업입니다. 그렇기 때문에 최근에는 개발 초기부터 테스트 케이스를 만들고 이것으로 개발하는 방식인 ``TDD(Test Driven Development)`` 방식이 만들어졌습니다.

### 테스트 주도 개발

TDD는 **단위 테스트(Unit Test)**를 기반으로 하는 방식입니다. 여기서 단위 테스트란 클래스 범주 내에서 작은 단위, 즉 **함수 단위**의 기능에 대한 유효성을 검증하는 테스트입니다. ([참고](https://tecoble.techcourse.co.kr/post/2021-05-25-unit-test-vs-integration-test-vs-acceptance-test/)) 단위 테스트를 작성하는 이유는 다음과 같습니다.
    - 코드를 수정하거나 기능을 추가할 때 수시로 빠르게 검증할 수 있다.
    - 리팩토링 시 안정성을 확보할 수 있다.
    - 개발 및 테스팅에 대한 비용을 절감할 수 있다.
보통 개발이 끝난 뒤에 문제가 없는지 확인하기 위해 애플리케이션을 실행하고, 직접 수동(통합) 테스트를 진행해왔습니다. 단위 테스트를 작성하지 않은 코드들은 테스트를 작성하지 않은 코드들보다 버그가 있을 확률이 높고, 직접 테스트하는 비용이 너무 큽니다. 따라서 이런 경우를 방지하기 위해 기능 구현과 동시에 테스트를 하는 방식을 도입했습니다.<br><br>

하지만 무지성으로 테스트를 진행하는 것은 좋지 않습니다. 클린코드에 따르면, 좋은 테스트는 FIRST라는 5가지 규칙을 따라야 합니다.
    1. Fast: 테스트는 빠르게 동작하여 자주 돌릴 수 있어야 한다.
    2. Independent: 각각의 테스트는 독립적이며 서로 의존해서는 안된다.
    3. Repeatable: 어떤 환경에서도 반복 가능해야 한다.
    4. Self-Validating: 테스트는 성공 or 실패로, bool 값으로 결과를 내어 자체적으로 검증되어야 한다.
    5. Timely: 테스트는 적시에, 즉 테스트하려는 **실제 코드를 구현하기 직전에 구현**해야 한다.

``좋은 테스트``는 **빠르게, 독립적으로 어느 환경에서든 실행이 가능하고 검증할 수 있어야 합니다.** 만약 테스트 실행 비용이 크다면 통합 테스트를 진행하는 것이 나을 수 있습니다.

## 테스트 코드를 먼저 작성해야 하는 이유

좋은 테스트의 FIRST 조건 중 Timely는 '테스트 코드는 실제 코드를 구현하기 직전에 구현해야 한다'입니다. 이렇게 테스트 코드를 먼저 작성하여 단위 테스트를 진행하는 개발 방법론이 테스트 주도 개발(TDD)입니다. 테스트 코드를 먼저 작성하는 이유는 다음과 같습니다.
    - 코드를 깔끔하게 작성할 수 있다.
    - 장기적으로 개발 비용을 절감할 수 있다.
    - 개발이 끝나면 테스트 코드를 작성하기 힘들다.
TDD의 개발 단계에는 **리팩토링**이 있습니다. 이 과정을 통해 중복된 코드가 제거되고, 복잡한 코드는 깔끔하게 정리됩니다. 개발 초기 속도가 더딘 것처럼 느껴지더라도 나중에 돌아보면 전혀 더디지 않았음을 알 수 있을 것입니다.<br>
아, 테스트 코드를 작성할 때 '실패 테스트'부터 작성해야 합니다. 순차적으로 실패하는 테스트를 먼저 작성하고, 오직 테스트가 실패할 경우에만 새로운 코드를 작성해야 합니다.

## TDD 방법 및 순서

1. 실패하는 작은 단위 테스트를 작성합니다. 이때, 컴파일이 되지 않을 수 있습니다.
2. 빨리 테스트를 통과하기 위해 프로덕션 코드를 작성합니다. 이를 위해 가짜 구현 등을 작성할 수도 있습니다.
3. 그 다음의 테스트 코드를 작성합니다. 실패 테스트가 없을 경우에만 성공 테스트를 작성합니다.
4. 새로운 테스트를 통과하기 위해 프로덕션 코드를 추가 또는 수정합니다.
5. 1~4단계를 반복하여 실패/성공의 모든 테스트 케이스를 작성합니다.
6. 개발된 코드들에 대해 모든 중복을 제거하며 리팩토링합니다.

- 가짜로 구현하기: 실패하는 테스트를 가장 빠르게 구현하는 방법은 아무 값이나 반환하도록 하는 것이다. 테스트가 통과하면 단계적으로 상수를 변수로 바꾸어 준다.
- 삼각 측량: 테스트 주도로 추상화된 과정을 일반화하는 과정이다. 테스트 예시가 2개 이상일 때만 추상화를 진행하자.
- 명백하게 구현하기: 쉬운 코드인 경우, 위 두 방법을 사용하지 않고 바로 정답 코드를 구현하는 방법이다.

## 화이트박스 테스트와 블랙박스 테스트

- 화이트박스 테스트(코드 기반 테스트)
    1. Statement Coverage: 모든 코드가 한번씩은 실행되게 입력(코드의 오류 여부 파악)
    2. Decision Coverage(branch test): 코드의 흐름에서 모든 진행을 테스트
    3. Condition Coverage: 조건에 맞는 input과 안맞는 input을 넣어서 옳은 흐름대로 진행되는지 테스트
    4. Multiple Condition Coverage: 조건문의 true/false에 대한 모든 상황을 고려
- 블랙박스 테스트(I/O 기반 테스트)
    1. Syntax Testing: 입력에 올바른 값과 올바르지 않은 값을 넣어서 테스트
    2. Equivalent Partitioning: 입력을 동등하게 쪼개고, 각 영역의 대표값을 입력하는 테스트
    3. Boundary Testing: 입력값의 경계를 테스트
    4. Decision Table: 입력값의 종류를 결정

## 참고

- [Software Test (소프트웨어 테스트) 종류와 방법](https://blog.lael.be/post/807)
- [단위 테스트와 TDD(테스트 주도 개발) 프로그래밍 방법 소개](https://mangkyu.tistory.com/182)
